<img src="https://github.com/crahal/NHSSpend/blob/master/papers/figures/nhs_spending_macro_header.png" width="900"/>

# NHSSpend

[![Generic badge](https://img.shields.io/badge/Python-3-<red>.svg)](https://shields.io/)  [![Generic badge](https://img.shields.io/badge/License-MIT-blue.svg)](https://shields.io/)  [![Generic badge](https://img.shields.io/badge/Maintained-Yes-green.svg)](https://shields.io/)
---

## Introduction

This is a library to scrape and reconcile all payments made by a hiarcharcy of NHS institutions over time. It is the final of three projects on public procurement data (the first two of which were [centgovspend](https://github.com/crahal/centgovspend) and [TSRC-NCVO-CSDP](https://github.com/crahal/TSRC-NCVO-CSDP)). Code for an interactive dashboard is hosted in src/dashboard (and access to the prototype of the dashboard is available on request). Links to open-access (OSF) version of the headline academic paper:

`The Role ofthe Third Sector in Public Health Service Provision: Evidence from 37,125 heterogeneous procurement datasets`

which introduces this library can be found [here](https://osf.io/download/61f1c837026ee60060b4f2e0/).

## Pre-requisites

NHSSpend tries to minimize the number of pre-requisite installations outside of the standard library, and we recommend an Anaconda installation to provide a comprehensive set of basic tools. However, a couple are necessary due to the magnitude of the undertaking. These include a range of modules found in the [requirements.txt](https://github.com/crahal/NHSSpend/blob/master/requirements.txt) file (generated by pipreqs). 

## Data Origination

The data originates from one of parts of the recognised NHS institutionional hierarchy. Lists of entities within these parts are used to create mappings to websites, and update on the status of the data  (data/data_support/ccg_list.xlsx and data/data_support/trust_list.xlsx) with a number of different parametres fed into the scrapers for:

1. CCGs: `./src/scrape_and_parse_ccgs.py.`
2. NHS Trusts: `./src/scrape_and_parse_trusts.py`
3. NHS England: `./src/scrape_and_parse_nhsengland.py`

The data curation exercise has stopped as of April 2020 in order to focus on data analysis and the writing of academic papers, with datasets from those papers being hosted on OSF following their publication. This is also partly due to the Covid-19 pandemic and the restructuring of Clinical Commissioning groups more generally (where 18 mergers took the number of CCGs from 191 to 136). However, please do raise issues on here if you think any of those institutions are mislabelled, or outdated. If you wanted to update this list (and the subsequent scrapers), please do raise an issue\get in touch (this is a constant ongoing work in progress until there is a centrally covened resource provided by the Government Data Service).

The procurement data itself is provided under an [Open Government License](http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/) (OGL). Guidance for publishing spend over Â£25,000 is published by [HM Treasury](https://www.gov.uk/government/publications/guidance-for-publishing-spend-over-25000).

## Reconciliation

The `es_configure.md` describes the reconciliation approach. These recocniliations are then manually verified and merged back into the procurement data.


## Licensing

This code is made available under an MIT License.

---
Last updated: 2020-01-24
